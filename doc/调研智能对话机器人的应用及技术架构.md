# 调研智能对话机器人的应用及技术架构

***惟江上之清风，与山间之明月，耳得之而为声，目遇之而成色，取之无禁，用之不竭，是造物者之无尽藏也，而吾与子之所共适。***

## 综述

什么是智能对话机器人？
如果让你来定义智能对话机器人，你会如何定义呢？
从某种意义上讲，智能机器人的终极状态就是人，就像人的助理一样（这里人人都是CEO）。我们通过想象人与助理的关系，来定义智能对话机器人。我们设想如下的场景：
1. 明天我想去趟杭州，交给助理，助理帮我完成了订票（任务式）
2. 今天晚上我想约朋友去吃个牛排，助理完成了餐厅定位（任务式）
3. 周五下午有个会，帮我定个会议室（任务式）
4. 今天有点无聊，陪我聊会天呗！（闲聊式/情感关怀）
5. 你知道年薪百万是种什么体验吗？（QA/CQA），这里可以辅以摘要的技术
6. 姚明的爸爸是谁？（KBQA）
7. 开下空调（控制式）
8. 在蔚来汽车中，说有点冷啊。（对话/控制）如果外面的温度低，这句话的操作可能是关上窗户，打开空调制暖/如果外面是大夏天，这句话的操作可能是把空调的冷气温度稍微调高点
9. 我的信用卡过期了，怎么操作（任务式，这是信用卡中心的智能客服）

当然，助理在和你交互的过程中，为了完成接下来的任务，可能会通过对话（单轮的/多轮的）获取尽可能多的帮助完成任务的信息，这种获取信息的方式是因人而异的。首先，作为助理，他可能已经掌握了你的很多基本信息，比如用户画像、行为信息等。
1. 在订票任务中，助理会通过会话，掌握老板的***目的地***、***出发时间***、***出发地***
2. 在餐厅订桌任务中，需要掌握***具体餐厅***、***用餐时间***、***用餐人数***、***附加说明***等

## 时间线
* 2010 Apple Siri GUI的基础上加上了Voice-UI
* 2014 Amazon Echo
* 2017 Amazon Echo Show (VUI做输入，GUI做输出)，一句简单的话，就能替代很多繁杂的操作；例如，来首beyond的海空天空，如果是GUI操作，需要打开音乐播放软件，查找海阔天空，选择，播放，这样的操作远不如“来首beyond的海空天空”来的简单快捷；而如果输出是大段的文本，读给你听可能远不如直接屏幕显示给你看来的舒心
* 未来 VUI++ 随心所欲的交流	、全息投影、3D、VR等


## 应用

* 替代手机上的APP，手机上的APP，相当于把你的专业性的需求代理给了更专业性的助手，这不就是google assistance/siri在做的事情么
* IOT

* 聊天。小冰，问候和寒暄，情感陪伴，基于搜索的检索系统，通过基于深度学习的语义匹配算法，从海量的问答红返回最佳的回复（message response而非Answer）
* 问答。QA/FAQ（很多服务网站中的常见问题列表）/CQA/KBQA
* 操控。开空调/电视/放歌，替代遥控器
* 任务式对话。目的性很强的对话，收集信息，填表单；订外卖、订酒店、订机票等
* 主动对话。

* 车载应用。发信息、打电话、解放眼睛和手脚
* 儿童教育机器人。儿童问答百科

## 技术架构

* 语音识别ASR——听得清
	* 人机对话-近讲，如siri， google assistant, 主要要解决口音问题
	* 人机对话-远讲，如echo， 要解决混音混响问题，可以利用语音唤醒
	* 人人对话，如会议纪要、法庭庭审等。这个真难。
* 语义理解——听得懂
* 对话管理
* 自然语言生成NLG
* 语音合成

## 人机对话中，机器角色演进

遥控器-->助手-->专家
单指令控制/固定句式-->自然语言交互/多轮对话/有情感、有性格-->有知识、能推荐、能决策

专家：聊音乐，聊诗词歌赋等。领域知识。你可以跟他看雪看星星看月亮，从诗词歌赋谈到人生哲学，并且不用担心，你老婆对你说“我都没有和你一起看雪看星星看月亮，从诗词歌赋谈到人生哲学”，你也不用跟你老婆保证“今后只和你一起看雪看星星看月亮，从诗词歌赋谈到人生哲学”。

## 知性会话

### 相关概念
语义、语境、语用
实例“太冷了”
### 人机对话系统下的语境
1. 物理语境
	时间/地点/天气（车里/家里/公司等）/情感/情绪/设备显示/设备感知（温度/湿度等）
2. 言语语境
	上下文/主题及焦点/设备反馈
3. 知识语境
	人类常识/领域知识/用户画像/Agent画像/设备信息库
	* 常识：“中国乒乓球队谁也赢不了”、“中国足球队谁也赢不了”
	* 结合知识做指代消除

### 知识图谱
1. 知识图谱只是一种知识的组织形式；我们可以用到的知识，并不限于知识图谱


### 知性会话
定义：以知识图谱为中心，通过实体发现与链接技术把各种各样可以用来作为对话的数据源融合在一起，实现跨领域、跨交互形式的多轮对话。
实体发现
链接技术？
#### 关键技术
1. 领域知识图谱的构建
	* 模式设计，定义类、概念、属性、关系
	* 数据源：结构化数据、非结构化数据、文本抽取
	* 词汇的挖掘：同义词、缩略词、短语
	* 实体发现、实体归类、实体链接、指代消除
	* 关系的抽取
	* 知识的融合：实体对齐、属性融合、值的规范化
	* 质量控制：知识的补全、纠错、更新
2. 知识图谱的质量评估
3. 敏捷构建
	* 便于快速迭代、敏捷开发
4. 实体发现与链接
	* 解决问题，同一意义的不同表达（科比、黑曼巴是同一个人），同一自然语言的歧义性（苹果既可能是水果，也可能是苹果公司）
	* 基于实体的多源数据融合（聊天库、文档库、FAQ）
	* 实体发现与链接
		* 上下文实体与图谱中关系的相关性
		* 排序候选实体，返回最可能的实体，候选排序，可以用到实体与实体之间的相关性做排序	
	* 融合知识的话语理解
		* 实体发现与链接
		* 指代消除、实体消解
		* 对候选语义，结合知识来消歧义（如“周巧文的生日”，根据上下文来判断是歌或出生日期）
	* 融合知识的聊天
		* 上下文：encoder\decoder\session
		* 一致性："多大了？"，将聊天助手的个性信息导入到decoder的输出过程中
		* 融合知识
	* 基于知识的问答
		* Semantic Parsing, 基于规则、模版、翻译模型、深度学习模型，（例如“姚明的妻子的国籍是？”：select district x where(国籍，姚明配偶)）
		* 基于机器学习的知识库问答方法。embedding匹配
		* 检索-排序，候选生成，利用entity linking的方法找到主实体，KB中主实体周围的均是候选实体，之后做候选排序
5. 基于知识的主动会话
	* 如果聊不下去了，会根据上下文找到聊天主题的实体，之后再根据知识图谱找相关的实体，根据相关的实体产生话题。

6. 人机对话有望成为物联网时代最主要的交互形式

## 人机对话中的技术演进
从语义到御用，从闲聊到知性，从多轮对话到流式对话。


## 设计到的具体技术

## 实例

## 待确认概念
1. 知识补全，线下补全，线上推理
2. 本体构建；质量评估：自动化测试、人工抽样


## Dataset
* [chinese_chatbot_corpus](https://github.com/codemayq/chinese_chatbot_corpus)
* [chatdata](https://github.com/namedada/chatdata/blob/master/README.md)
* [目前的提供开放API的中文知识图谱有哪些？](https://www.zhihu.com/question/30479287)
* [cnSchema: 面向bot的开放中文知识图谱schema](https://github.com/cnschema/cnschema/wiki/cnSchema:-%E9%9D%A2%E5%90%91bot%E7%9A%84%E5%BC%80%E6%94%BE%E4%B8%AD%E6%96%87%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1schema)
* [开放中文知识图谱的schema](https://github.com/cnschema/cnschema)
* [大规模中文自然语言处理语料](https://github.com/brightmart/nlp_chinese_corpus)
	1.维基百科(wiki2019zh)，100万个结构良好的中文词条
	2.新闻语料(news2016zh)，250万篇新闻，含关键词、描述
	3.百科问答(baike2018qa)，150万个带问题类型的问答
	4.社区问答json版(webtext2019zh)，410万个高质量社区问答，适合训练超大模型
	5.翻译语料(translation2019zh)，520万个中英文句子对

## Reference
* [当知识图谱遇上聊天机器人](https://www.jiqizhixin.com/articles/2017-08-29)
* [基于知识图谱的人机对话系统 ](https://zhuanlan.zhihu.com/p/47494314)
* [解读 2018：知识图谱已成 AI 下一风口，但你知道它进展到哪了吗？](https://www.infoq.cn/article/YlIWfV-kwhM4fRbfeDTk)
* [基于知识图谱的智能问答](https://zhuanlan.zhihu.com/p/41827326)
* [知识图谱应用篇（三）-知识图谱的问答场景应该如何选择？](https://www.jianshu.com/p/2e73f56babca)
* [回顾·智能导购对话机器人实践](https://juejin.im/post/5b827158e51d4538af60f2bf)
* [美团对话理解技术及实践](https://mp.weixin.qq.com/s?__biz=MzU0NjkxMDMyNQ==&mid=2247484987&idx=1&sn=d154504e6e0c00faaebe86216*6b3b0d1&chksm=fb573f21cc20b637ff47137660b701f9e78f7c6692aa38ba0213657ad4c56e47e8b01b13ecac&mpshare=1&scene=1&srcid=0608P*TKipWOJ0DPvCHtJC1uK&pass_ticket=kp0Z6Afff%2Ft4e0xNssaI7d8DWUd7zty%2BbNe8cUaf8h7XGwnOUu9mtUP3tYzvEhwy#rd)
* [AI+客服，变革正在发生（下）](https://zhuanlan.zhihu.com/p/25227584)
* [Neural Approaches to Conversational AI](https://www.microsoft.com/en-us/research/uploads/prod/2018/07/neural-approaches-to-conversational-AI.pdf)
* [Conversational Agents](https://web.stanford.edu/class/cs124/lec/chatbot.pdf)
* [实体链接](https://docs.huihoo.com/infoq/baidu-salon51-entity-links.pdf)
* [实体链接，实体融合相关技术调研](https://www.jianshu.com/p/36d8b7182f6b)
* [揭开知识库问答KB-QA的面纱3·信息抽取篇](https://zhuanlan.zhihu.com/p/25782244)
* 

